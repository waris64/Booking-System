{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{signInWithPopup,signOut,onAuthStateChanged,createUserWithEmailAndPassword,signInWithEmailAndPassword}from'firebase/auth';import{auth,googleProvider}from'../config/firebase';import toast from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,user=>{setUser(user);setLoading(false);});return unsubscribe;},[]);const signInWithGoogle=async()=>{try{const result=await signInWithPopup(auth,googleProvider);toast.success(\"Welcome, \".concat(result.user.displayName,\"!\"));return result.user;}catch(error){toast.error('Failed to sign in with Google');throw error;}};const signUpWithEmail=async(email,password)=>{try{const result=await createUserWithEmailAndPassword(auth,email,password);toast.success('Account created successfully!');return result.user;}catch(error){toast.error('Failed to create account');throw error;}};const signInWithEmail=async(email,password)=>{try{const result=await signInWithEmailAndPassword(auth,email,password);toast.success(\"Welcome back, \".concat(result.user.email,\"!\"));return result.user;}catch(error){toast.error('Failed to sign in');throw error;}};const logout=async()=>{try{await signOut(auth);toast.success('Signed out successfully');}catch(error){toast.error('Failed to sign out');throw error;}};const value={user,loading,signInWithGoogle,signUpWithEmail,signInWithEmail,logout};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:!loading&&children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","signInWithPopup","signOut","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","auth","googleProvider","toast","jsx","_jsx","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","loading","setLoading","unsubscribe","signInWithGoogle","result","success","concat","displayName","error","signUpWithEmail","email","password","signInWithEmail","logout","value","Provider"],"sources":["D:/Code/Booking System/frontend/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { \r\n  signInWithPopup, \r\n  signOut, \r\n  onAuthStateChanged,\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword\r\n} from 'firebase/auth';\r\nimport { auth, googleProvider } from '../config/firebase';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      setUser(user);\r\n      setLoading(false);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const signInWithGoogle = async () => {\r\n    try {\r\n      const result = await signInWithPopup(auth, googleProvider);\r\n      toast.success(`Welcome, ${result.user.displayName}!`);\r\n      return result.user;\r\n    } catch (error) {\r\n      toast.error('Failed to sign in with Google');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const signUpWithEmail = async (email, password) => {\r\n    try {\r\n      const result = await createUserWithEmailAndPassword(auth, email, password);\r\n      toast.success('Account created successfully!');\r\n      return result.user;\r\n    } catch (error) {\r\n      toast.error('Failed to create account');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const signInWithEmail = async (email, password) => {\r\n    try {\r\n      const result = await signInWithEmailAndPassword(auth, email, password);\r\n      toast.success(`Welcome back, ${result.user.email}!`);\r\n      return result.user;\r\n    } catch (error) {\r\n      toast.error('Failed to sign in');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await signOut(auth);\r\n      toast.success('Signed out successfully');\r\n    } catch (error) {\r\n      toast.error('Failed to sign out');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    loading,\r\n    signInWithGoogle,\r\n    signUpWithEmail,\r\n    signInWithEmail,\r\n    logout\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}